# 每日温度

给定一个整数数组 `temperatures` ，表示每天的温度，返回一个数组 `answer` ，其中 `answer[i]` 是指对于第 `i` 天，下一个更高温度出现在几天后。如果气温在这之后都不会升高，请在该位置用 `0` 来代替。

 

**示例 1:**

```
输入: temperatures = [73,74,75,71,69,72,76,73]
输出: [1,1,4,2,1,1,0,0]
```

**示例 2:**

```
输入: temperatures = [30,40,50,60]
输出: [1,1,1,0]
```

**示例 3:**

```
输入: temperatures = [30,60,90]
输出: [1,1,0]
```

 

**提示：**

- `1 <= temperatures.length <= 105`
- `30 <= temperatures[i] <= 100`

## 解决方案

```cpp
class Solution {
public:
    vector<int> dailyTemperatures(vector<int>& temperatures) {
        int n = temperatures.size();
        vector<int> ret(n,0);
        stack<int> st; // 单调栈，存下标
        for(int i=0;i<n;i++){
            // 栈不为空，而且当前温度大于栈顶温度
            while(!st.empty() && temperatures[i]> temperatures[st.top()]){
                // 计算栈顶日期差
                int prev = st.top();
                st.pop();
                ret[prev] = i-prev;
            }
            st.push(i);
        }
        return ret;
    }
};
```

## 算法思路

### 核心思想：单调栈
使用单调递减栈来维护温度的下标，栈中元素对应的温度是递减的。

### 处理逻辑：

1. **遍历数组**：从左到右遍历每个温度
2. **维护单调栈**：
   - 当栈为空时，直接入栈
   - 当当前温度 <= 栈顶温度时，直接入栈
   - 当当前温度 > 栈顶温度时，弹出栈顶并计算天数差
3. **计算天数差**：`answer[prevIndex] = i - prevIndex`

## 时间复杂度
- **时间复杂度**：O(n)，每个元素最多入栈出栈一次
- **空间复杂度**：O(n)，栈的空间开销

## 优化版本

也可以使用从右到左遍历的方式：

```cpp
class Solution {
public:
    vector<int> dailyTemperatures(vector<int>& temperatures) {
        int n = temperatures.size();
        vector<int> answer(n, 0);
        stack<int> st;
        
        // 从右到左遍历
        for (int i = n - 1; i >= 0; i--) {
            // 弹出所有小于等于当前温度的元素
            while (!st.empty() && temperatures[st.top()] <= temperatures[i]) {
                st.pop();
            }
            
            // 如果栈不为空，说明找到了更高的温度
            if (!st.empty()) {
                answer[i] = st.top() - i;
            }
            
            st.push(i);
        }
        
        return answer;
    }
};
```

## 关键理解

1. **单调栈的性质**：栈中元素对应的温度是递减的
2. **为什么这样有效**：当遇到更高温度时，栈中所有小于该温度的元素都可以被更新
3. **时间复杂度保证**：每个元素最多入栈出栈一次，所以总时间复杂度是O(n)